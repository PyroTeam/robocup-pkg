<launch>
	<!-- Pyro TEAM -->
	<!-- Team Namespace -->
	<group ns="PYRO">
		<param name="machineLocation/robot1" value="robotino1" />
		<param name="machineLocation/robot2" value="" />
		<param name="machineLocation/robot3" value="" />
		<param name="machineLocation/centralizedManager" value="" />
	</group>
	<!-- Robotino Pyro 1 -->
	<group ns="robotino1">
		<arg name="tf_prefix" value="robotino1"/>

		<!-- Params -->
		<param name="teamName" value="PYRO" />
		<param name="teamColor" value="cyan" />
		<param name="robotNumber" value="1" />
		<param name="robotName" value="R1" />
		<param name="simuRobotNamespace" value="$(arg tf_prefix)" />

		<param name="hardware/robotDescription/baseLink_to_laserLink/x"  value="0.46.5/2 - 0.14" /><!-- 0.0925 -->
		<param name="hardware/robotDescription/baseLink_to_laserLink/y"  value="0.0" />
		<param name="hardware/robotDescription/baseLink_to_laserLink/z"  value="0.255" />
		<param name="hardware/robotDescription/baseLink_to_towerCameraLink/x"  value="0.46.5/2 - 0.12" /><!-- 0.1125 -->
		<param name="hardware/robotDescription/baseLink_to_towerCameraLink/y"  value="-0.015" />
		<param name="hardware/robotDescription/baseLink_to_towerCameraLink/z"  value="0.55" />
		<param name="hardware/robotDescription/baseLink_to_platformCameraLink/x"  value="0.0" />
		<param name="hardware/robotDescription/baseLink_to_platformCameraLink/y"  value="0.00" />
		<param name="hardware/robotDescription/baseLink_to_platformCameraLink/z"  value="0.90" />

		<rosparam file="$(find gazebo_sim_launch)/param/robotino1_navigation.yaml" />

		<!-- Robotino node -->
		<arg name="hostname" default="127.0.0.1" />

		<node name="robotino_node" pkg="robotino_node" type="robotino_node" output="screen">
			<param name="hostname" value="$(arg hostname)" />
			<param name="max_linear_vel" value="0.5" />
			<param name="min_linear_vel" value="0.05" />
			<param name="max_angular_vel" value="3.0" />
			<param name="min_angular_vel" value="0.1" />
			<param name="downsample_kinect" value="true" />
			<param name="leaf_size_kinect" value="0.04" />
			<remap from="robotino_joint_states" to="joint_states" />
			<!--remap from="image_raw" to="image"/-->
		</node>

		<node name="robotino_odometry_node" pkg="robotino_node" type="robotino_odometry_node" output="screen">
			<param name="hostname" value="$(arg hostname)" />
		</node>

		<node name="robotino_laserrangefinder_node" pkg="robotino_node" type="robotino_laserrangefinder_node" output="screen">
			<param name="hostname" value="$(arg hostname)" />
			<param name="laserRangeFinderNumber" value="0" />
		</node>

		<node name="robotino_camera_node" pkg="robotino_node" type="robotino_camera_node" output="screen">
			<param name="hostname" value="$(arg hostname)" />
			<param name="cameraNumber" value="0" />
			<remap from="image_raw" to="hardware/" />
		</node>

		<!-- Load the tf_broadcaster node -->
		<node pkg="tf_broadcaster" name="tf_broadcaster" type="tf_broadcaster_node"/>

		<!-- Load ArTag -->
		<include file="$(find ar_tag)/launch/alvar_simu.launch">
        	<arg name="marker_size" default="13.0" />
			<arg name="output_frame" value="$(arg tf_prefix)/tower_camera_link"/>
			<arg name="respawn" value="true"/>
			<arg name="output" value="log"/>
		</include>
	</group>
</launch>
